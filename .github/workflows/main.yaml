name: Github actions Environments
on:
  push:
    branches:
      - main
    paths:
      - '.github/workflows/main.yaml'

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: building
        run: echo "building"

  test:
    runs-on: ubuntu-latest

    steps:
      - name: testing
        run: echo "testing"

  deploy_stg:
    runs-on: ubuntu-latest
    needs: [build, test]

    steps:
      - name: deploy stg
        run: echo "deploy stg"

  deploy_prod:
    uses: afeefgalil/prod/.github/workflows/main.yaml@master
    secrets: inherit